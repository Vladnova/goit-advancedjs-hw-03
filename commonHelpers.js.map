{"version":3,"file":"commonHelpers.js","sources":["../src/js/cat-api.js","../src/index.js"],"sourcesContent":["const BASE_URL = 'https://api.thecatapi.com/v1';\nconst API_KEY =\n  'live_q73VBaRHKVF6SZN99amO4B1AerhylDDwvZesq98yVMEWg4sIjUpNZSPWmATT4yNu';\naxios.defaults.headers.common['x-api-key'] = API_KEY;\n\nimport axios from 'axios';\n\nexport async function fetchBreeds() {\n  const response = await axios.get(`${BASE_URL}/breeds`);\n  return response.data;\n}\n\nexport async function fetchCatByBreed(breedId) {\n  const response = await axios.get(\n    `${BASE_URL}/images/search?breed_ids=${breedId}`\n  );\n  return response.data;\n}\n","import { fetchBreeds, fetchCatByBreed } from './js/cat-api';\nimport SlimSelect from 'slim-select';\nimport 'slim-select/styles';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refs = {\n  select: document.querySelector('.breed-select'),\n  div: document.querySelector('.cat-info'),\n  loader: document.querySelector('.loader'),\n};\n\nconst newSelect = new SlimSelect({\n  select: refs.select,\n  settings: {\n    placeholderText: 'Search cat',\n  },\n\n});\n\nconst error = {\n  title: 'Error',\n  message: 'Oops! Something went wrong! Try reloading the page!',\n  position: 'topRight',\n};\n\nfunction changeVisible(element) {\n  element.classList.toggle('hidden');\n}\nasync function handlerGetBreeds(e) {\n  changeVisible(refs.loader);\n  changeVisible(refs.div);\n  newSelect.disable()\n  try {\n    const catInfo = await fetchCatByBreed(e.target.value);\n    createMarkup(catInfo);\n  } catch (err) {\n    iziToast.error(error)\n    refs.div.innerHTML = '';\n  } finally {\n    changeVisible(refs.loader);\n    changeVisible(refs.div);\n    newSelect.enable()\n  }\n}\n\nfunction fillingSelect(breeds) {\n  const options = breeds.map(({ id, name }) => {\n    const option = document.createElement('option');\n    option.value = id;\n    option.text = name;\n    return option;\n  });\n\n  newSelect.setData([{ placeholder: true, text: '',  }, ...options]);\n}\n\nfunction createMarkup(cat) {\n  const { url, breeds } = cat[0];\n  const markup = breeds\n    .map(({ name, description, temperament }) => {\n      return `\n    <img class='imgCat' src=${url} alt=${name} width='600'>\n    <div class ='wrap-content'>\n      <h2 class='title'>${name}</h2>\n      <p class='text'>${description}</p>\n      <p class='text'>\n        <b>Temperament:</b>\n        ${temperament}\n      </p>\n    </div>\n    `;\n    })\n    .join();\n\n  refs.div.innerHTML = markup;\n}\n\nasync function startInit() {\n  newSelect.disable()\n  try {\n    const allBreeds = await fetchBreeds();\n\n    fillingSelect(allBreeds);\n\n    refs.select.addEventListener('change', handlerGetBreeds);\n  } catch (err) {\n    iziToast.error(error);\n  } finally {\n    changeVisible(refs.loader);\n    changeVisible(refs.select);\n    newSelect.enable()\n  }\n}\n\nstartInit();\n"],"names":["BASE_URL","API_KEY","axios","fetchBreeds","fetchCatByBreed","breedId","refs","newSelect","SlimSelect","error","changeVisible","element","handlerGetBreeds","e","catInfo","createMarkup","iziToast","fillingSelect","breeds","options","id","name","option","cat","url","markup","description","temperament","startInit","allBreeds"],"mappings":"owBAAA,MAAMA,EAAW,+BACXC,EACJ,wEACFC,EAAM,SAAS,QAAQ,OAAO,aAAeD,EAItC,eAAeE,GAAc,CAElC,OADiB,MAAMD,EAAM,IAAI,GAAGF,UAAiB,GACrC,IAClB,CAEO,eAAeI,EAAgBC,EAAS,CAI7C,OAHiB,MAAMH,EAAM,IAC3B,GAAGF,6BAAoCK,GAC3C,GACkB,IAClB,CCXA,MAAMC,EAAO,CACX,OAAQ,SAAS,cAAc,eAAe,EAC9C,IAAK,SAAS,cAAc,WAAW,EACvC,OAAQ,SAAS,cAAc,SAAS,CAC1C,EAEMC,EAAY,IAAIC,EAAW,CAC/B,OAAQF,EAAK,OACb,SAAU,CACR,gBAAiB,YAClB,CAEH,CAAC,EAEKG,EAAQ,CACZ,MAAO,QACP,QAAS,sDACT,SAAU,UACZ,EAEA,SAASC,EAAcC,EAAS,CAC9BA,EAAQ,UAAU,OAAO,QAAQ,CACnC,CACA,eAAeC,EAAiBC,EAAG,CACjCH,EAAcJ,EAAK,MAAM,EACzBI,EAAcJ,EAAK,GAAG,EACtBC,EAAU,QAAS,EACnB,GAAI,CACF,MAAMO,EAAU,MAAMV,EAAgBS,EAAE,OAAO,KAAK,EACpDE,EAAaD,CAAO,CACrB,MAAC,CACAE,EAAS,MAAMP,CAAK,EACpBH,EAAK,IAAI,UAAY,EACzB,QAAY,CACRI,EAAcJ,EAAK,MAAM,EACzBI,EAAcJ,EAAK,GAAG,EACtBC,EAAU,OAAQ,CACnB,CACH,CAEA,SAASU,EAAcC,EAAQ,CAC7B,MAAMC,EAAUD,EAAO,IAAI,CAAC,CAAE,GAAAE,EAAI,KAAAC,KAAW,CAC3C,MAAMC,EAAS,SAAS,cAAc,QAAQ,EAC9C,OAAAA,EAAO,MAAQF,EACfE,EAAO,KAAOD,EACPC,CACX,CAAG,EAEDf,EAAU,QAAQ,CAAC,CAAE,YAAa,GAAM,KAAM,EAAM,EAAE,GAAGY,CAAO,CAAC,CACnE,CAEA,SAASJ,EAAaQ,EAAK,CACzB,KAAM,CAAE,IAAAC,EAAK,OAAAN,CAAQ,EAAGK,EAAI,GACtBE,EAASP,EACZ,IAAI,CAAC,CAAE,KAAAG,EAAM,YAAAK,EAAa,YAAAC,CAAW,IAC7B;AAAA,8BACiBH,SAAWH;AAAA;AAAA,0BAEfA;AAAA,wBACFK;AAAA;AAAA;AAAA,UAGdC;AAAA;AAAA;AAAA,KAIL,EACA,OAEHrB,EAAK,IAAI,UAAYmB,CACvB,CAEA,eAAeG,GAAY,CACzBrB,EAAU,QAAS,EACnB,GAAI,CACF,MAAMsB,EAAY,MAAM1B,IAExBc,EAAcY,CAAS,EAEvBvB,EAAK,OAAO,iBAAiB,SAAUM,CAAgB,CACxD,MAAC,CACAI,EAAS,MAAMP,CAAK,CACxB,QAAY,CACRC,EAAcJ,EAAK,MAAM,EACzBI,EAAcJ,EAAK,MAAM,EACzBC,EAAU,OAAQ,CACnB,CACH,CAEAqB,EAAW"}